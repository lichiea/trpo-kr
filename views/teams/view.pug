extends ../layout

block content

  // Первое навигационное поле
  header.header
    .container
      .header-content
        a.logo(href='/')
          i.fas.fa-spray-can
          span Клининговая компания

  .page-container
    .navigation-links
      a.back-link(href='/teams') ← Назад к списку бригад
    
    .content-card
      .profile-header
        h1.page-title= title
  
      .profile-content
        form#teamForm.profile-form
          .form-section
            h2.section-title Основная информация
            
            .form-grid
              .form-group
                label(for="editId") ID бригады:
                .form-value= team.id
              
              .form-group
                label(for="editTaskmaster") Бригадир (пользователь с ролью "Бригадир"):
                if can_view_teams
                  select#editTaskmaster(name="id_taskmaster")
                    option(value="") Не назначен
                    each taskmaster in taskmasters
                      option(
                        value=taskmaster.user_id, 
                        selected=(team.taskmaster_user_id == taskmaster.user_id)
                      )= `${taskmaster.fio} (${taskmaster.position_d || 'без должности'})`
                else
                  .form-value
                    if team.taskmaster_fio
                      a(href='/employees/' + team.id_taskmaster)= team.taskmaster_fio
                      if team.taskmaster_login
                        span.info-text (логин: #{team.taskmaster_login})
                    else
                      | Не назначен

              .form-actions
                .buttons-row
                  if can_view_teams
                    button.primary-button#editSaveButton(type="button") Сохранить изменения
                    button.secondary-button#addMemberButton(type="button") Добавить клинера
                    button.danger-button#deleteButton(type="button") Удалить бригаду
                  else
                    .no-permission-message У вас нет прав для редактирования бригады

        .info-section
          h2.section-title Состав бригады (Клинеры)
          
          if team_members && team_members.length > 0
            .table-container
              table.data-table
                thead
                  tr
                    th ФИО
                    th Логин
                    th Должность
                    if can_view_teams
                      th Действия
                tbody
                  each member in team_members
                    tr
                      td
                        a(href='/employees/' + member.employee_id)= member.employee_fio
                      td= member.employee_login
                      td= member.employee_position
                      if can_view_teams
                        td
                          button.danger-button.small-button.remove-member-btn(
                            data-item-id=member.item_id,
                            data-employee-name=member.employee_fio
                          ) Удалить
          else
            .empty-message В бригаде нет клинеров

        // Новый раздел: Заказы бригады
        .info-section
          .section-header
            h2.section-title Заказы, назначенные на бригаду
            .stats-badge
              span.total= orders_stats.total_orders
              |  всего
              if orders_stats.active_orders > 0
                span.active= orders_stats.active_orders
                |  в работе
          
          if team_orders && team_orders.length > 0
            .table-container
              table.data-table
                thead
                  tr
                    th ID заказа
                    th Статус
                    th Клиент
                    th Телефон клиента
                    th Плановая дата
                    th Тип документа
                    th Сумма
                    th Подписи
                tbody
                  each order in team_orders
                    tr(class=order.order_status === 'Заказ в работе' ? 'active-row' : '')
                      td
                        a(href='/orders/' + order.order_id)= order.order_id
                      td
                        .status-badge(class=order.order_status.replace(/\s+/g, '-').toLowerCase())
                          = order.order_status
                      td
                        a(href='/clients/' + order.order_id)= order.client_fio
                      td= order.client_phone
                      td
                        if order.planned_date
                          = new Date(order.planned_date).toLocaleDateString('ru-RU')
                        else
                          | Не указана
                      td= order.document_type
                      td
                        if order.total_cost
                          = new Intl.NumberFormat('ru-RU').format(order.total_cost) + ' ₽'
                        else
                          | Не указана
                      td
                        if order.client_signed && order.employee_signed
                          .signatures.both-signed
                            i.fas.fa-check-circle
                            span Подписаны
                        else if order.client_signed || order.employee_signed
                          .signatures.partial-signed
                            i.fas.fa-check-circle
                            span Частично
                        else
                          .signatures.not-signed
                            i.fas.fa-times-circle
                            span Не подписаны
          else
            .empty-message
              i.fas.fa-clipboard-list
              p На бригаду не назначено ни одного заказа

    // Модальные окна остаются без изменений
    div#addMemberModal.modal-window(style="display: none;")
      .modal-overlay
      .modal-content
        .modal-header
          h3 Добавить клинера в бригаду
          button.modal-close#addMemberModalClose ×
        .modal-body
          .form-group
            label(for="selectEmployee") Выберите клинера (пользователя с ролью "Клинер"):
            select#selectEmployee
              option(value="") Выберите клинера
              each cleaner in cleaners
                option(value=cleaner.user_id)= `${cleaner.fio} (${cleaner.position_d || 'без должности'})`
        .modal-footer
          button.secondary-button#cancelAddMember Отмена
          button.primary-button#confirmAddMember Добавить

    div#deleteConfirmModal.modal-window(style="display: none;")
      .modal-overlay
      .modal-content
        .modal-header
          h3 Подтверждение удаления
          button.modal-close#deleteModalClose ×
        .modal-body
          .warning-message
            .warning-icon ⚠️
            .warning-text
              h4 Вы уверены, что хотите удалить бригаду?
              p
                strong Бригада №#{team.id}
              p Это действие нельзя отменить. Все данные бригады будут удалены безвозвратно.
        .modal-footer
          button.secondary-button#cancelDelete Отмена
          button.danger-button#confirmDelete Удалить

  script.
    // JavaScript код остается без изменений, как в предыдущем исправлении
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOMContentLoaded - инициализация страницы бригады');
      
      const saveButton = document.getElementById('editSaveButton');
      const addMemberButton = document.getElementById('addMemberButton');
      const deleteButton = document.getElementById('deleteButton');
      
      const addMemberModal = document.getElementById('addMemberModal');
      const addMemberModalClose = document.getElementById('addMemberModalClose');
      const cancelAddMemberButton = document.getElementById('cancelAddMember');
      const confirmAddMemberButton = document.getElementById('confirmAddMember');
      const selectEmployee = document.getElementById('selectEmployee');
      
      const deleteModal = document.getElementById('deleteConfirmModal');
      const deleteModalClose = document.getElementById('deleteModalClose');
      const cancelDeleteButton = document.getElementById('cancelDelete');
      const confirmDeleteButton = document.getElementById('confirmDelete');
      
      const pathSegments = window.location.pathname.split('/');
      const teamId = pathSegments[pathSegments.length - 1];
      
      console.log('Elements found:', {
        saveButton: !!saveButton,
        addMemberButton: !!addMemberButton,
        deleteButton: !!deleteButton
      });
      
      function openModal(modal) {
        console.log('Opening modal:', modal.id);
        if (modal) {
          modal.style.display = 'block';
          document.body.style.overflow = 'hidden';
        }
      }
      
      function closeModal(modal) {
        console.log('Closing modal:', modal.id);
        if (modal) {
          modal.style.display = 'none';
          document.body.style.overflow = 'auto';
        }
      }
      
      if (saveButton) {
        saveButton.addEventListener('click', async function(e) {
          console.log('Save button clicked');
          e.preventDefault();
          
          const taskmasterUserId = document.getElementById('editTaskmaster').value;
          const formData = {
            id_taskmaster: taskmasterUserId || null
          };
          
          saveButton.disabled = true;
          saveButton.textContent = 'Сохранение...';
          
          try {
            const response = await fetch(`/teams/update/${teamId}`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(formData)
            });
            
            const data = await response.json();
            
            if (data.msg === '') {
              alert('Данные бригады успешно обновлены');
              window.location.reload();
            } else {
              alert('Ошибка: ' + data.msg);
            }
            
          } catch (error) {
            console.error('Error:', error);
            alert('Ошибка при обновлении данных: ' + error.message);
          } finally {
            saveButton.disabled = false;
            saveButton.textContent = 'Сохранить изменения';
          }
        });
      }
      
      if (addMemberButton) {
        addMemberButton.addEventListener('click', function(e) {
          console.log('Add member button clicked');
          e.preventDefault();
          openModal(addMemberModal);
        });
      }
      
      function closeAddMemberModal() {
        closeModal(addMemberModal);
        if (selectEmployee) {
          selectEmployee.value = '';
        }
      }
      
      if (addMemberModalClose) {
        addMemberModalClose.addEventListener('click', function(e) {
          e.preventDefault();
          closeAddMemberModal();
        });
      }
      
      if (cancelAddMemberButton) {
        cancelAddMemberButton.addEventListener('click', function(e) {
          e.preventDefault();
          closeAddMemberModal();
        });
      }
      
      if (confirmAddMemberButton) {
        confirmAddMemberButton.addEventListener('click', async function(e) {
          e.preventDefault();
          
          const userId = selectEmployee.value;
          
          if (!userId) {
            alert('Пожалуйста, выберите клинера');
            return;
          }
          
          confirmAddMemberButton.disabled = true;
          confirmAddMemberButton.textContent = 'Добавление...';
          
          try {
            const response = await fetch(`/teams/${teamId}/add-member`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({ user_id: parseInt(userId) })
            });
            
            const data = await response.json();
            
            if (data.msg === '') {
              alert('Клинер добавлен в бригаду');
              window.location.reload();
            } else {
              alert('Ошибка: ' + data.msg);
            }
            
          } catch (error) {
            console.error('Error:', error);
            alert('Ошибка при добавлении клинера: ' + error.message);
          } finally {
            confirmAddMemberButton.disabled = false;
            confirmAddMemberButton.textContent = 'Добавить';
          }
        });
      }
      
      document.querySelectorAll('.remove-member-btn').forEach(button => {
        button.addEventListener('click', async function(e) {
          e.preventDefault();
          
          const itemId = this.dataset.itemId;
          const employeeName = this.dataset.employeeName;
          
          if (confirm(`Удалить "${employeeName}" из бригады?`)) {
            try {
              const response = await fetch(`/teams/${teamId}/remove-member/${itemId}`, {
                method: 'DELETE',
                headers: {
                  'Content-Type': 'application/json',
                }
              });
              
              const data = await response.json();
              
              if (data.msg === '') {
                alert('Клинер удален из бригады');
                window.location.reload();
              } else {
                alert('Ошибка: ' + data.msg);
              }
              
            } catch (error) {
              console.error('Error:', error);
              alert('Ошибка при удалении клинера');
            }
          }
        });
      });
      
      if (deleteButton) {
        deleteButton.addEventListener('click', function(e) {
          console.log('Delete button clicked');
          e.preventDefault();
          openModal(deleteModal);
        });
      }
      
      function closeDeleteModal() {
        closeModal(deleteModal);
      }
      
      if (deleteModalClose) {
        deleteModalClose.addEventListener('click', function(e) {
          e.preventDefault();
          closeDeleteModal();
        });
      }
      
      if (cancelDeleteButton) {
        cancelDeleteButton.addEventListener('click', function(e) {
          e.preventDefault();
          closeDeleteModal();
        });
      }
      
      if (confirmDeleteButton) {
        confirmDeleteButton.addEventListener('click', async function(e) {
          e.preventDefault();
          
          confirmDeleteButton.disabled = true;
          confirmDeleteButton.textContent = 'Удаление...';
          
          try {
            const response = await fetch(`/teams/delete/${teamId}`, {
              method: 'DELETE',
              headers: {
                'Content-Type': 'application/json',
              }
            });
            
            const data = await response.json();
            
            if (data.msg === '') {
              alert('Бригада успешно удалена');
              window.location.href = '/teams';
            } else {
              alert('Ошибка: ' + data.msg);
              closeDeleteModal();
            }
            
          } catch (error) {
            console.error('Error:', error);
            alert('Ошибка при удалении бригады');
          } finally {
            confirmDeleteButton.disabled = false;
            confirmDeleteButton.textContent = 'Удалить';
          }
        });
      }
      
      document.querySelectorAll('.modal-overlay').forEach(overlay => {
        overlay.addEventListener('click', function(e) {
          e.preventDefault();
          const modal = this.closest('.modal-window');
          closeModal(modal);
        });
      });
      
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
          if (addMemberModal.style.display === 'block') {
            closeAddMemberModal();
          }
          if (deleteModal.style.display === 'block') {
            closeDeleteModal();
          }
        }
      });
      
      console.log('Initial modal states:', {
        addMemberModal: addMemberModal.style.display,
        deleteModal: deleteModal.style.display
      });
      
      if (addMemberModal.style.display === 'block') {
        console.log('Add member modal was open on load, closing...');
        closeAddMemberModal();
      }
      
      if (deleteModal.style.display === 'block') {
        console.log('Delete modal was open on load, closing...');
        closeDeleteModal();
      }
    });


  style.
    /* Общие стили */
    .page-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 30px 20px;
    }
    
    .content-card {
      background: #FFFFFF;
      border-radius: 12px;
      padding: 40px;
      box-shadow: 0 4px 20px rgba(92, 78, 174, 0.1);
    }
    
    .page-title {
      font-size: 32px;
      color: #5C4EAE;
      margin: 0;
      font-weight: 600;
    }
    
    /* Навигационные ссылки */
    .navigation-links {
      display: flex;
      justify-content: space-between;
      margin-bottom: 25px;
    }
    
    .back-link, .home-link {
      color: #6C5FBC;
      text-decoration: none;
      font-size: 16px;
      font-weight: 500;
      transition: color 0.3s ease;
    }
    
    .back-link:hover, .home-link:hover {
      color: #5C4EAE;
      text-decoration: underline;
    }
    
    /* Шапка профиля */
    .profile-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 40px;
      padding-bottom: 25px;
      border-bottom: 2px solid #EAEAEA;
    }
    
    /* Секции */
    .section-title {
      font-size: 24px;
      color: #5C4EAE;
      margin-bottom: 25px;
      font-weight: 600;
    }
    
    .form-section, .info-section {
      margin-bottom: 40px;
    }
    
    /* Форма */
    .profile-form {
      margin-bottom: 40px;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 25px;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .form-group label {
      font-weight: 600;
      color: #333;
      font-size: 16px;
    }
    
    .form-group input {
      padding: 14px 16px;
      border: 2px solid #EAEAEA;
      border-radius: 8px;
      font-size: 16px;
      background: #FFFFFF;
      transition: all 0.3s ease;
    }
    
    .form-group input:focus {
      outline: none;
      border-color: #6C5FBC;
      box-shadow: 0 0 0 3px rgba(108, 95, 188, 0.1);
    }
    
    .form-group input:disabled {
      background-color: #F8F8F8;
      color: #666;
      cursor: not-allowed;
    }

    .form-group select{
      padding: 14px 16px;
      border: 2px solid #EAEAEA;
      border-radius: 8px;
      font-size: 16px;
      max-width: 520px;
      background: #FFFFFF;
      transition: all 0.3s ease;
    }
    
    .form-group select:focus {
      outline: none;
      border-color: #6C5FBC;
      box-shadow: 0 0 0 3px rgba(108, 95, 188, 0.1);
    }
    
    .form-group select:disabled {
      background-color: #F8F8F8;
      color: #666;
      cursor: not-allowed;
    }  
    
    .form-value {
      padding: 14px 0;
      font-size: 16px;
      color: #333;
      border-bottom: 1px solid #EAEAEA;
    }
    
    .form-actions {
      margin-top: 30px;
      padding-top: 25px;
      border-top: 2px solid #EAEAEA;
    }
    
    .buttons-row {
      display: flex;
      gap: 20px;
      justify-content: flex-start;
      align-items: center;
      flex-wrap: wrap;
    }

    /* Информационные карточки */
    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }
    
    .info-item {
      display: flex;
      flex-direction: column;
      gap: 6px;
      padding: 15px;
      background: #F8F8F8;
      border-radius: 8px;
      border-left: 4px solid #6C5FBC;
    }
    
    .info-label {
      font-weight: 600;
      color: #5C4EAE;
      font-size: 14px;
    }
    
    .info-value {
      color: #333;
      font-size: 16px;
    }
    
    /* Карточки бригады */
    .info-card {
      background: #FFFFFF;
      border-radius: 12px;
      padding: 25px;
      border: 2px solid #EAEAEA;
      display: flex;
      align-items: flex-start;
      gap: 20px;
    }
    
    .team-leader-card {
      border-color: #FFD700;
      background: linear-gradient(135deg, #FFF9E6 0%, #FFF0B3 100%);
    }
    
    .team-member-card {
      border-color: #6C5FBC;
      background: linear-gradient(135deg, #F5F3FF 0%, #E6E1FF 100%);
    }
    
    .info-icon {
      font-size: 32px;
      background: white;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .info-content {
      flex: 1;
    }
    
    .info-card h3 {
      font-size: 20px;
      color: #5C4EAE;
      margin: 0 0 15px 0;
      font-weight: 600;
    }
    
    .info-details {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .detail {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .detail-label {
      font-weight: 600;
      color: #666;
      font-size: 15px;
      min-width: 120px;
    }
    
    .detail-value {
      color: #333;
      font-size: 16px;
      font-weight: 500;
    }
    
    .small-button {
      padding: 4px 8px;
      font-size: 12px;
      height: auto;
    }

    /* Сообщения */
    .empty-message {
      text-align: center;
      padding: 40px 20px;
      color: #666;
      font-size: 18px;
      font-style: italic;
      background: #F8F8F8;
      border-radius: 8px;
      border: 1px dashed #DDD;
    }

    /* Стили для раздела заказов */
    .stats-badge {
      display: flex;
      align-items: center;
      gap: 10px;
      background: #f5f5f5;
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 14px;
    }

    .stats-badge .total {
      font-weight: bold;
      color: #333;
    }

    .stats-badge .active {
      font-weight: bold;
      color: #28a745;
      margin-left: 10px;
    }

    .status-badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 500;
    }

    .status-badge.новый {
      background-color: #e3f2fd;
      color: #1976d2;
    }

    .status-badge.заказ-в-работе {
      background-color: #fff3cd;
      color: #856404;
    }

    .status-badge.заказ-выполнен {
      background-color: #d4edda;
      color: #155724; 
    }

    .status-badge.завершён {
      background-color: #d1ecf1;
      color: #0c5460;
    }

    .status-badge.на-согласовании-зн,
    .status-badge.на-согласовании-акта {
      background-color: #f8d7da;
      color: #721c24;
    }

    .active-row {
      background-color: #f8f9fa;
      border-left: 4px solid #007bff;
    }

    .signatures {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 12px;
    }

    .signatures.both-signed {
      color: #28a745;
    }

    .signatures.partial-signed {
      color: #ffc107;
    }

    .signatures.not-signed {
      color: #dc3545;
    }

    .signatures i {
      font-size: 14px;
    }

    .empty-message {
      text-align: center;
      padding: 40px 20px;
      color: #6c757d;
    }

    .empty-message i {
      font-size: 48px;
      margin-bottom: 15px;
      color: #dee2e6;
    }

    .empty-message p {
      margin-top: 10px;
      font-size: 16px;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    /* Стили для модальных окон */
    .modal-window {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1000;
    }

    .modal-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
    }

    .modal-content {
      position: relative;
      background-color: white;
      margin: 50px auto;
      padding: 20px;
      border-radius: 8px;
      max-width: 500px;
      width: 90%;
      max-height: 100vh;
      overflow-y: auto;
      z-index: 1001;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #e0e0e0;
    }

    .modal-header h3 {
      margin: 0;
      font-size: 1.5rem;
      color: white;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #666;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .modal-close:hover {
      background-color: #f0f0f0;
      color: #333;
    }

    .modal-body {
      margin-bottom: 20px;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      padding-top: 20px;
      border-top: 1px solid #e0e0e0;
    }

    /* Мелкие кнопки для таблицы */
    .small-button {
      padding: 4px 8px;
      font-size: 12px;
      height: auto;
      min-height: unset;
    }

    /* Информационный текст */
    .info-text {
      font-size: 0.9em;
      color: #666;
      margin-left: 8px;
      font-style: italic;
    }
    
    /* Кнопки */
    .primary-button {
      background-color: #6C5FBC;
      color: white;
      padding: 14px 32px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      transition: all 0.3s ease;
      min-width: 180px;
    }
    
    .primary-button:hover {
      background-color: #5C4EAE;
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(108, 95, 188, 0.3);
    }
    
    .primary-button.save-button {
      background-color: #4CAF50; /* Зелёный для сохранения */
    }
    
    .primary-button.save-button:hover {
      background-color: #45a049;
      box-shadow: 0 6px 15px rgba(76, 175, 80, 0.3);
    }

    .no-permission-message {
      color: #666;
      font-style: italic;
      padding: 15px;
      text-align: center;
      background-color: #f5f5f5;
      border-radius: 8px;
      border: 1px solid #ddd;
    }

    .secondary-button {
      background-color: #EAEAEA;
      top: -100px;
      color: #333;
      padding: 12px 28px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      max-width: 200px;
      transition: all 0.3s ease;
    }
    
    .secondary-button:hover {
      background-color: #DDD;
      transform: translateY(-2px);
    }

    .buttons-container {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .danger-button {
      background-color: #dc3545;
      color: white;
      padding: 14px 32px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      transition: all 0.3s ease;
      min-width: 200px;
    }
    
    .danger-button:hover {
      background-color: #c82333;
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(220, 53, 69, 0.3);
    }
    
    /* Модальное окно удаления */
    #deleteConfirmModal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    
    #deleteConfirmModal .modal-content {
      background: #FFFFFF;
      border-radius: 12px;
      width: 500px;
      max-width: 90%;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    }
    
    #deleteConfirmModal .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 25px 30px;
      border-bottom: 1px solid #EAEAEA;
      background-color: #dc3545;
      border-radius: 12px 12px 0 0;
    }
    
    #deleteConfirmModal .modal-header h3 {
      color: white;
      margin: 0;
      font-size: 22px;
    }
    
    #deleteConfirmModal .modal-close {
      background: none;
      border: none;
      color: white;
      font-size: 28px;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: background-color 0.3s ease;
    }
    
    #deleteConfirmModal .modal-close:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }
    
    #deleteConfirmModal .modal-body {
      padding: 30px;
    }
    
    #deleteConfirmModal .modal-footer {
      padding: 20px 30px;
      border-top: 1px solid #EAEAEA;
      display: flex;
      justify-content: flex-end;
      gap: 15px;
    }
    
    .warning-message {
      display: flex;
      align-items: flex-start;
      gap: 20px;
    }
    
    .warning-icon {
      font-size: 40px;
      flex-shrink: 0;
    }
    
    .warning-text h4 {
      margin: 0 0 10px 0;
      color: #dc3545;
      font-size: 18px;
    }
    
    .warning-text p {
      margin: 8px 0;
      color: #333;
    }
    
    .warning-text strong {
      color: #dc3545;
      font-size: 17px;
    }
    
    @media (max-width: 768px) {
      .buttons-container {
        flex-direction: column;
      }
      
      .primary-button,
      .danger-button {
        width: 100%;
      }
      
      .warning-message {
        flex-direction: column;
        text-align: center;
      }
    }

    .loading-spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
      margin-right: 8px;
      vertical-align: middle;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    /* Блокировка прокрутки при открытом модальном окне */
    body {
      transition: overflow 0.3s ease;
    }
    
    /* Адаптивность */
    @media (max-width: 1024px) {
      .content-card {
        padding: 30px;
      }
      
      .form-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }
    }
    
    @media (max-width: 768px) {
      .page-container {
        padding: 20px 15px;
      }
      
      .content-card {
        padding: 25px 20px;
      }
      
      .profile-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 20px;
      }
      
      .page-title {
        font-size: 28px;
      }
      
      .section-title {
        font-size: 22px;
      }
      
      .navigation-links {
        flex-direction: column;
        gap: 15px;
      }
      
      .info-card {
        flex-direction: column;
        text-align: center;
      }
      
      .info-icon {
        align-self: center;
      }
      
      .detail {
        flex-direction: column;
        align-items: flex-start;
        gap: 5px;
      }
    }